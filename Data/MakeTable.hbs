-- switch       - MakeTable
-- https://bitbucket.org/codeasaurus/switch
-- Description  - Template to generate a SQL Server MakeTable from View script similar to MSAccess MakeTable
--

--CREATE TABLE
{{#each Items}}	
DROP TABLE [DATABASE_NAME].[SCHEMA].[tbl{{Name}}]
GO
CREATE TABLE [DATABASE_NAME].[SCHEMA].[tbl{{Name}}](
	{{#each Columns}}[{{Name}}] [{{DataTypeNameComplete}}] {{#xIf IsNullable "===" true}}NULL{{else}}NOT NULL{{/xIf}} {{xNotLast ","}}
	{{/each}})
GO
{{/each}}

--INSERT TABLE
{{#each Items}}			
INSERT INTO [DATEBASE_NAME].[SCHEMA].[DESTINATION_NAME]
		   ({{#each Columns}}{{xNotFirst ", "}}[{{Name}}]{{/each}})
		SELECT {{#each Columns}}{{xNotFirst ", "}}s.[{{Name}}]{{/each}}
			FROM [{{Database.Name}}].[{{Schema}}].[{{Name}}] s 
{{/each}}
GO
